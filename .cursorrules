# Cursor AI Rules for Bloomberg QQQ Fetcher

## Project Context
This is a Bloomberg Terminal data fetcher for QQQ options and its TOP 20 CONSTITUENT STOCKS.

## Critical Rules

### 1. ALWAYS fetch ALL 20 constituents by default
- Default behavior: `--top-n 20` or no parameter (fetches all)
- Never suggest `--top-n 5` unless explicitly requested
- The user needs all 20 stocks for comprehensive hedging analysis

### 2. Data Requirements
- MUST include OPEN_INT (Open Interest) field
- MUST fetch ATM Â± 20 strikes
- MUST fetch expiries within 60 days
- MUST include all Greeks (Delta, Gamma, Theta, Vega, Rho)

### 3. Main Commands
```bash
# Correct - fetches all 20
python scripts/robust_fetch.py --export-csv
python scripts/robust_fetch.py --top-n 20 --export-csv

# Wrong - only fetches 5
python scripts/robust_fetch.py --top-n 5  # DON'T suggest this
```

### 4. File Locations
- Main fetcher: `scripts/robust_fetch.py`
- Constituents list: `config/qqq_constituents.yaml` (20 stocks)
- Web interface: `app.py`
- Setup script: `setup_and_run.py`

### 5. Error Recovery
- Always suggest `--resume` flag if fetch was interrupted
- State is saved in `logs/fetch_state.json`
- Database has automatic checkpoint saves

### 6. Best Practices
- Run after 4:30 PM ET
- Ensure Bloomberg Terminal is running and logged in
- Use web interface for ease: `python setup_and_run.py`
- Export to CSV after database storage

## When Helping Users

1. Default to fetching ALL 20 constituents
2. Emphasize OPEN_INT is included
3. Mention resume capability
4. Suggest web interface for beginners
5. Check Bloomberg connection first

## Expected Output
- ~24,000+ option records (not ~3,000)
- 20 constituent stocks (not 5)
- Complete Greeks and OI data
- CSV export in `data/` directory